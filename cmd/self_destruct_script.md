# 自爆（自分自身を削除）するコマンドファイル

## 実行したバッチファイルを削除

* 直接実行する場合
```console
del %0
```

* 別コマンドファイルからの実行
```console
del "%~f0"
```
実行したときのパス指定（フルパス指定ではない場合など）により「%0」「"%\~f0"」が必要になる場合がある。「"%\~f0"」は「%\~dpnx0」と同じ。

※ゴミ箱に入らずいきなり削除されるので注意

## 実行したフォルダごと削除

舞部からフォルダ削除をしようとするとフォルダが削除できずに残る(ファイルのみ削除される)
→ 一旦フォルダ削除するコマンドファイルを外に出して外からフォルダを削除、その後自分を削除する

例】
作業フォルダ名： job-folder
作業実行コマンドファイル： job.cmd

```console
@echo off

rem -----job-folderに移動-----
cd /d "%~dp0"

rem -----ここまで実行するコマンドを記述-----

rem -----作業実行ファイルを親ディレクトリにコピー
copy rmdir .cmd ..\rd.cmd

rem -----親ディレクトリのファイルを実行-----
..\rb.cmd

exit
```

例】
削除実行コマンドファイル 「作業フォルダ内 rmdir.cmd → 親ディレクトリ rd.cmd」
```console
@echo off

rem -----親ディレクトリに移動
cd ..
rem cd "%~dp0" (これでもOK)

rem -----job-folder を削除-----
rd /s /q job-folder 
rem /s: 空でないディレクトリも削除, /q: 確認しない
rem rd /s /q "%~dp0job-folder" (これでもOK)

rem -----このファイルを削除-----
del "%~f0"
rem del %0 (..\rd.cmdとなりNG)

exit
```

※ゴミ箱に入らずいきなり消えてなくなるので注意