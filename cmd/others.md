# 1. その他コマンド
- [1. その他コマンド](#1-その他コマンド)
  - [1.1. scpコマンド](#11-scpコマンド)
    - [1.1.1. オプション](#111-オプション)
    - [1.1.2. パス](#112-パス)
  - [1.2. 実行権限について](#12-実行権限について)
    - [1.2.1. 確認](#121-確認)
    - [1.2.2. アクセス権限の変更](#122-アクセス権限の変更)
      - [1.2.2.1. 数値で指定](#1221-数値で指定)
      - [1.2.2.2. アルファベットで指定](#1222-アルファベットで指定)
    - [1.2.3. オプション](#123-オプション)
  - [ファイル削除（linux）](#ファイル削除linux)
    - [オプション](#オプション)
  - [ファイルの文字列検索](#ファイルの文字列検索)
    - [and, or 検索](#and-or-検索)
    - [オプション](#オプション-1)
  - [カレントディレクトリのパス確認]](#カレントディレクトリのパス確認)
## 1.1. scpコマンド
```
$ scp [オプション] コピー元パス 保存先パス
```
### 1.1.1. オプション
|オプション|説明|
|:--|:--|
|-i 鍵ファイル|ssh接続に使用する鍵ファイルを指定する|
|-P ポート番号|(sshのポートを変更している場合などに)接続に使用するポートを指定する|
|-p|コピー元のタイムスタンプやパーミッションを保持する|
|-r|ディレクトリごとに再帰的にコピーする|

### 1.1.2. パス
パスは以下のような構成で記述する。
```
ユーザ名@サーバのホスト名(or IPアドレス):コピーしたいファイル、もしくは保存先のパス
```
ローカルの場合は`ユーザ名@サーバのホスト名(or IPアドレス):`を省略できる。

* リモートのファイル（test.txt）をローカルのカレントディレクトリへコピー
```
$ scp user@xxx.xxx.xxx.xxx:~/test.txt ./
```

* ローカルのカレントディレクトリのファイル（test.txt）をリモートのホームディレクトリ直下へコピー
```
$ scp test.txt user@xxx.xxx.xxx.xxx:~/
```

## 1.2. 実行権限について
以下はlinux環境でのもの
### 1.2.1. 確認

カレントディレクトリ内のファイルやディレクトリの情報を確認する。
```bash
$ ll
```
または
```bash
$ ls -l
```
上記コマンドを実行すると、以下のように表示
```bash
-rw-r--r--  1 user group  90  3月 16 11:50 test.txt
drwxr-xr-x  2 user group 253  3月 16 11:50 downloads
```

`-rw-r--r--`や`drwxr-xr-x`はファイルの情報を示す。
最初の1文字目はファイルの種類を以下のように示す。
|種別|意味|
|:--|:--|
|-|ファイル|
|d|ディレクトリ|
|l|シンボリックリンク|

それ以降は3文字区切りで順にファイルの所有者、所有グループ、その他に関する権限を示す。その文字が表示されていたら該当する権限があり、「-」だった場合は権限がない。
また文字それぞれの意味は以下の通り。
|文字|意味|
|:--|:--|
|r|読み取り|
|w|書き込み|
|x|実行|

### 1.2.2. アクセス権限の変更
変更には`chmod`コマンドを使う。指定方法には数字とアルファベットがある。
#### 1.2.2.1. 数値で指定
以下はhoge.txtに対してパーミッションの確認→変更→確認を行っている。
```bash
$ ls -l　
-rw-r--r--  1 user group      9  1月 1 00:00 hoge.txt
$ chmod 764 hoge.txt
$ ls -l
-rwxrw-r--  1 user group      9  1月 1 00:00 hoge.txt
```
chmodのコマンドは数字で指定する場合以下のように実行する。
```bash
chmod モード 対象ファイル名
```
モードの数字は以下の通り
|モード（数字）|モード（アルファベット）|権限|
|:--|:--|:--|
|4|r|読み取り|
|2|w|書き込み|
|1|x|実行|

上記の合計値を「所有者」「所有グループ」「その他」の順で入力
例えば「764」の場合、それぞれ「読み取り」「書き込み」「実行」、「読み取り」「書き込み」、「読み取り」を付与している
組み合わせとしては以下のようになる
|合計値|読み取り|書き込み|実行|
|:--:|:--:|:--:|:--:|
|1|×|×|〇|
|2|×|〇|×|
|3|×|〇|〇|
|4|〇|×|×|
|5|〇|×|〇|
|6|〇|〇|×|
|7|〇|〇|〇|

#### 1.2.2.2. アルファベットで指定
以下はhoge.txtに対して所有者、所有グループ、その他にそれぞれ「実行」、「書き込み」を追加している。（最初と最後は数字のものと同じ)
```bash
$ ls -l
-rw-r--r--  1 user group      9  1月 1 00:00 hoge.txt
$ chmod u+x hoge.txt
$ ls -l
-rwxr--r--  1 user group      9  1月 1 00:00 hoge.txt
$ chmod g+w hoge.txt
$ ls -l
-rwxrw-r--  1 user group      9  1月 1 00:00 hoge.txt
```
アルファベットで変更するときは以下のようにコマンドを実行
```bash
chmod (変更対象)(変更方法)(変更内容) 対象ファイル
```
以下を例にする
```bash
$ chmod u+x hoge.txt
```
uが変更対象、+が変更方法、xが変更内容
変更対象については以下のようになる
|変更対象|意味|
|:--|:--|
|u|ユーザー|
|g|グループ|
|o|その他|
|a|すべて|
変更方法については以下のようになる
|変更方法|意味|
|=|指定した権限にする|
|+|指定した権限を付与（追加）する|
|-|指定した権限を除去する|
よって先の例は「ユーザーに実行権限を付与」となる。
以下のように複数指定もできる。
```bash
$ chmod go+w hoge.txt
$ chmod a-wx hoge.txt
```
### 1.2.3. オプション
オプションを指定する際は以下のように実行
```bash
$ chmod [option] [mode] [file or directory]
```
chmodコマンドのオプションは以下のようになっている。
|オプション|意味|
|:--|:--|
|-f|エラーメッセージを表示しない|
|-c|実行時に変更があったときのみ結果を表示|
|-v|詳細を表示|
|-R|ディレクトリ内の複数ファイルを対象に|

## ファイル削除（linux）
`rm`コマンドでファイル、ディレクトリを削除する。
その際ファイル、ディレクトリは複数指定できる
以下書式
```cmd
$ rm [option] file1 file2 file3 ...
$ rm [option] dir1 dir2 dir3 ...
```

### オプション
|短いオプション|長いオプション|意味|
|:--|:--|:--|
|-f|--force|存在しないファイルを無視する（確認もしない）|
|-i|--interactive|削除前に確認する|
|-v|--verbose|経過を表示する|
|-d|--directory|unlinkでディレクトリを削除する|
|-r, -R|--recursive|ディレクトリを再帰的に削除する|

## ファイルの文字列検索
windowsでは`find`、macやlinuxでは`grep`コマンドで検索する
* grep
```cmd
$ grap 検索正規表現 ファイル名
```
例) workディレクトリ内のファイルすべての中からaという文字列を検索
```cmd
$ grep a work/*
```

### and, or 検索
* and検索
  二つの条件両方に当てはまる行を表示する。基本的にはパイプで二つのコマンドをつなぐ
  ```cmd
  $ grep 検索文字列1 ファイル名 | grep 検索文字列2
  ```
  1文の中でのand検索は、以下のように正規表現を使う
  ```cmd
  $ grep スタートの検索文字列.*尾張の検索文字列 ファイル名
  ```
  例) workディレクトリ内のファイルすべての中からrで始まってpで終わる部分のある行
  ```cmd
  $ grep r.*p work/*
  ```
* or検索
  オプションで拡張正規表現を用いて|のor演算子を使う
  ```cmd
  $ grep -E 検索正規表現 ファイル名
  ```
  例) workディレクトリ内のファイルすべての中から大文字のpまたはeのいずれかを検索
  ```cmd
  $ grep -E 'p|e' work/*
  ```
  もしくはeオプションを使う
  ```cmd
  $ grep -e 検索正規表現1 -e 検索正規表現2 ファイル名
  ```
  例) workディレクトリ内のファイルすべての中から小文字のpまたはaのいずれかを検索
  ```cmd
  $ grep -e p -e a work/*
  ```
### オプション
|オプション名|意味|
|:--|:--|
|-i|大文字と小文字を区別しない|
|-E|拡張正規表現を使う|
|-e|一致処理に指定した正規表現を使う|
|-v|一致しないものを検索|
|-n|検索結果に行番号を表示|
|-l|検索結果にファイル名のみ表示|
|-h|検索結果にファイル名を表示しない|
|-o|検索結果に一致した文字を表示|
|-C|検索結果に一致した個所から前後に指定した行数表示|
|-r|ディレクトリ内も検索対象とする|

## カレントディレクトリのパス確認]
`pwd`コマンドで確認できる
```cmd
$ pwd
/home/hoge/now_dir
```
