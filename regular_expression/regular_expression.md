# 正規表現

## 基本的な正規表現

<div style="text-align: center">基本的な正規表現</div>

|文字|説明|正規表現の例|マッチする例|
|:--:|:---|:---|:---|
|.|**任意の1文字**にマッチ|.|A<br>あ|
|+|直前の文字が**1回以上**繰り返す場合にマッチ。<br>**最長一致**。条件に合う最長の部分に一致する。|go+gle|gogle<br>go...gle|
|\*|直前の文字が**0回以上**繰り返す場合にマッチ。<br>**最長一致**。条件に合う最長の部分に一致する。|go\*gle|ggle<br>go...gle|
|?|直前の文字が**0個か1個**の場合にマッチ。<br>**最長一致**。条件に合う最長の部分に一致する。|go?gle|ggle<br>gogle|
|+?|直前の文字が**1回以上**繰り返す場合にマッチ。<br>**最短一致**。条件に合う最短の部分に一致する。|go+?gle|gogle<br>go...gle|
|\*?|直前の文字が**0回以上**繰り返す場合にマッチ。<br>**最短一致**。条件に合う最短の部分に一致する。|go\*?gle|ggle<br>go...gle|
|??|直前の文字が**0個か1個**の場合にマッチ。<br>**最短一致**。条件に合う最短の部分に一致する。|go??gle|ggle<br>gogle|
|\||**いずれかの条件(OR条件)**として使われる|goog(le\|ol)|google<br>googol|
|\\|直後の正規表現記号を**エスケープ**|go\\+gle|go+gle|
|\[...]|角括弧に含まれる**いずれか1文字**にマッチ|\[abc]<br>\[a-c]|a, b, c|
|\[^...]|角括弧に含まれる**文字以外**にマッチ|\[\^abc]<br>\[\^a-c]|a, b, c<br>以外の文字|
|(...)|文字を1つのグループに**まとめる**ことができる|goog(le\|ol)|google<br>googol|
|{n}|直前の文字の**桁数を指定**できる|a{3}|aaa|
|{n,}|直前の文字の**最小桁数のみ指定**できる|a{3,}|aaa<br>aaaa...|
|{n,m}|直前の文字の**最小桁数と最大桁数を指定**できる<br>**最長一致**。条件に合う最長の部分に一致する。|a{3,4}|aaa<br>aaaa|
|{n,m}?|直前の文字の**最小桁数と最大桁数を指定**できる<br>**最短一致**。条件に合う最短の部分に一致する。|a{3,4}?|aaa<br>aaaa|

<div style="text-align: center">定義済みの正規表現</div>

|文字|説明|対応する表現|
|:--:|:---|:---|
|\\t|タブ|(なし)|
|\\r|改行。CR(Carriage Return:0x0D)|(なし)|
|\\n|改行。LF(Line Feed:0x0A)|(なし)|
|\\d|すべての数字|\[0-9]|
|\\D|すべての数字以外の文字|\[\^0-9]|
|\\s|垂直タブ以外のすべての空白文字|[ \\t\\f\\r\\n]|
|\\S|すべての非空白文字|\[\^ \\t\\f\\r\\n]|
|\\w|アルファベット、アンダーバー、数字|\[a-zA-Z_0-9]|
|\\W|アルファベット、アンダーバー、数字以外の文字|\[\^a-zA-Z_0-9]|

<div style="text-align: center">特定の位置関係の正規表現</div>

|文字|説明|正規表現の例|マッチする例|
|:--:|:---|:---|:---|
|\^|直後の文字が行の**先頭**にある場合にマッチ|\^google|google...|
|\$|直後の文字が行の**末尾**にある場合にマッチ|google\$|...google|
|\\<|単語の先頭にマッチ|\\<|\*google|
|\\>|単語の末尾にマッチ|\\>|google\*|
|\\b|単語の先頭か末尾にマッチ|\\b|\*google\*|
|\\B|単語の先頭か末尾以外にマッチ|\\B|google|
|\\A|ファイルの先頭にマッチ|\\A|(なし)|
|\\z|ファイルの末尾にマッチ|\\z|(なし)|
|\\G|直前の一致文字列の末尾にマッチ|\\G|(なし)|

<div style="text-align: center">置換文字列で使える正規表現</div>

|文字|説明|
|:---|:---|
|\\0|一致した文字列全体に置換|
|\\1 ～ \\9|一致した文字列の1~9番目に対応する文字列に置換|
|\\l|次の1文字を小文字に変換|
|\\L...\\E|挟まれた文字列を小文字に変換|
|\\u|次の1文字を大文字に変換|
|\\U...\\E|挟まれた文字列を大文字に変換|

## 正規表現のサンプル一覧
1. **aから始まってzで終わる3桁の文字列**
```
a.z
```
|メタ文字|説明|
|:--|:--|
|.|任意の 1 文字。文字の種類には関係なく 1 文字に該当|
2. aから始まってzで終わる2桁以上の文字列
```
a.*z
```
|メタ文字|説明|
|:--|:--|
|.|任意の 1 文字。文字の種類には関係なく 1 文字に該当|
|*|直前のパターンを 0 回以上繰り返し。|

3. **aから始まってzで終わる3桁以上の文字列**
```
a.+z
```
|メタ文字|説明|
|:--|:--|
|.|任意の 1 文字。文字の種類には関係なく 1 文字に該当|
|+|直前のパターンを 1 回以上繰り返し。|

4. **半角数字**
```
\d
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|

5. **半角数字以外**
```
\D
```
|メタ文字|説明|
|:--|:--|
|\\D|半角数字以外。スペースも含め、それぞれ1文字ずつヒット|

6. **4桁の半角数字**
```
\d{4}
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|{n}|直前のパターンをn回繰り返し|

7. **4桁以上の半角数字**
```
\d{4,}
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|{n,}|直前のパターンをn回以上繰り返し|

8. **1~4桁の半角数字**
```
\d{1,4}
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|{n,m}|直前のパターンをn~m回以上繰り返し。最長一致なので、4桁の数字列に優先してヒット|

9. **4~10桁の半角数字（最長一致）**
```
\d{4,10}
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|{n,m}|直前のパターンをn~m回以上繰り返し。最長一致なので、4桁の数字列に優先してヒット|


10. **4~10桁の半角数字（最短一致）**
```
\d{4,10}?
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|{n,m}|直前のパターンをn~m回以上繰り返し。最長一致なので、4桁の数字列に優先してヒット|
|?|直前の繰り返し指定を最短一致にする。できるだけ短い文字列にヒットしようとする|

11. **桁区切りのカンマ付数字列**
```
\b\d{1,3}(,\d{3})*\b
```
|メタ文字|説明|
|:--|:--|
|\\b|語の区切り文字|
|\\d|半角数字。それぞれ1文字ずつヒット|
|{n,m}|直前のパターンをn~m回以上繰り返し。最長一致なので、4桁の数字列に優先してヒット|
|{n}|直前のパターンをn回繰り返し|
|*|直前のパターンを0回以上繰り返し|

12. **半角英大文字**
```
\u
```
|メタ文字|説明|
|:--|:--|
|\\u|半角英大文字|

13. **半角英大文字以外**
```
\U
```
|メタ文字|説明|
|:--|:--|
|\\U|半角英大文字以外|

14. **半角英小文字**
```
\l
```
|メタ文字|説明|
|:--|:--|
|\\l|半角英小文字|

15. **半角英小文字以外**
```
\L
```
|メタ文字|説明|
|:--|:--|
|\\L|半角英小文字以外|

16. **半角英文字**
```
[\u\l]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|\\u|半角英大文字|
|\\l|半角英小文字|

17. **半角英文字以外**
```
[^\u\l]
```
|メタ文字|説明|
|:--|:--|
|\[\^ ]|括弧内に含まれない1文字|
|\\u|半角英大文字|
|\\l|半角英小文字|

18. **英単語（半角英文字列）**
```
\b[\u\l]+\b
```
|メタ文字|説明|
|:--|:--|
|\\b|語の区切り文字|
|\[ ]|括弧内のいずれか1文字|
|\\u|半角英大文字|
|\\l|半角英小文字|
|+|直前のパターンを1回以上繰り返し|

19. **1桁の偶数**
```
[02468]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|

20. **1桁以上の偶数**
```
\d*[02468]\b
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|*|直前のパターンを0回以上繰り返し|
|\[ ]|括弧内のいずれか1文字|
|\\b|語の区切り文字|

21. **1桁の奇数**
```
[13579]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|

22. **1桁以上の奇数**
```
\d*[13579]\b
```
|メタ文字|説明|
|:--|:--|
|\\d|半角数字。それぞれ1文字ずつヒット|
|*|直前のパターンを0回以上繰り返し|
|\[ ]|括弧内のいずれか1文字|
|\\b|語の区切り文字|

23. **3~7までの数字**
```
[3-7]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

24. **1桁の16進数**
```
[0-9A-Fa-f]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

25. **1桁の全角数字**
```
[０-９]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

26. **1桁の全角英字**
```
[Ａ-Ｚ]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

27. **ひらがな**
```
[あ-ん]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

28. **カタカナ**
```
[ア-ン]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

29. **半角カタカナ**
```
[ｦ-ﾟ]
```
|メタ文字|説明|
|:--|:--|
|\[ ]|括弧内のいずれか1文字|
|-|\[ ]内でのみ指定できる範囲指定のメタ文字|

30. **改行**
```
\n
```
|メタ文字|説明|
|:--|:--|
|\\n|改行文字。CRLF 改行、LF 改行にもヒットする|

31. **空白文字**
```
\s
```
|メタ文字|説明|
|:--|:--|
|\\s|空白文字。半角スペース、タブ、改行文字のいずれかにヒットします（全角スペースにはヒットしません）

32. **OR条件**
```
東京|大阪
```
|メタ文字|説明|
|:--|:--|
|\||OR条件。AまたはB|

33. **行頭**
```
^
```
|メタ文字|説明|
|:--|:--|
|\^|行頭（ウィンドウ幅などで折り返した表示上の行頭は含まない|

34. **行末**
```
$
```
|メタ文字|説明|
|:--|:--|
|\$|行末（ウィンドウ幅などで折り返した表示上の行末は含まない|

35. **空白行**
```
^\n
```
|メタ文字|説明|
|:--|:--|
|\^|行頭（ウィンドウ幅などで折り返した表示上の行頭は含まない|
|\\n|改行文字。CRLF 改行、LF 改行にもヒットする|

36. **行全体**
```
^.*$
```
|メタ文字|説明|
|:--|:--|
|\^|行頭（ウィンドウ幅などで折り返した表示上の行頭は含まない|
|\.|任意の1文字。文字の種類に関係なく1文字に該当|
|\*|直前のパターンを0回以上繰り返し|
|\$|行末（ウィンドウ幅などで折り返した表示上の行末は含まない|

## 使用頻度の高い正規表現式

1. Emailアドレス（RFC準拠ではない）
```
^\w+([-+.]\w+)*@\w([-.]\w+)*\.\w+([-.]\w)*$
```

2. URL

```
^https?://([\w-]+\.)+[\w-]+(/[\w-./?%&=]*)?$
```

3. ドメイン名
```
^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z-]{2,}$
```

4. 固定電話番号
```
^0\d(-\d{4}|\d-\d{3}|\d\d-\d\d|\d{3}-\d)-\d{4}$
```

5. 携帯電話番号
```
^0[789]0-\d{4}-\d{4}**$**
```

6. IP電話番号
```
^050-\d{4}-\d{4}**$**
```

7. フリーダイヤル
```
^(0120|0800)-\d{3}-\d{3}$
```

8. 日付（YYYY-MM-DD形式）
```
^\d{4}-\d\d-\d\d$
```

9. 郵便番号
```
^\d{3}-\d{4}$
```

## 修飾子一覧

|修飾子|説明|
|:-:|:--|
|/i|大文字と小文字を区別しない|
|/o|式の展開（正規表現のコンパイル）を一度だけ行う|
|/x|パターンの空白やコメントを無視|
|/m|対象の文字列を複数行として扱う。`.`が改行にもマッチする|
|/g|繰り返しマッチを行う|
|/e|置換を行った結果を式として処理する|

# ワイルドカード
wordなどの検索に用いる。

## ワイルドカードの意味と検索例

### ?
任意の**1文字**を検索する。
|検索例|検索結果|
|:--:|:---|
|第?回|〇 第1回, 第2回<br />× 第10回|
|第??回|〇 第10回|
|b?g|〇 big, bag, bug, buggy|

### \*
任意の0文字以上の文字列を検索
|検索例|検索結果|
|:--:|:---|
|第*回|〇 第1回, 第100回, 第三者への発言を撤回|

### \[ - ]
範囲内の任意の1文字
使用方法は正規表現と同じため省略(\[0-9]など)

### \[ ]
指定した文字のいずれか**1文字**
使用方法は正規表現と同じため省略(\[ae]→a, eなど)

### @
@の直前の文字が1つ、もしくは複数連続している文字を検索
|検索例|検索結果|
|:--:|:---|
|do@l|dol, dool, doool|

### \<
単語の先頭文字を指定して検索
|検索例|検索結果|
|:--:|:---|
|\<sign|signから始まる単語を検索<br>〇 sign, signs, signature<br>× assignment|
|\<con|conから始まる単語を検索<br>〇 confusion, congratulation<br>× second|

### \>
単語の末尾を指定して検索
|検索例|検索結果|
|:--:|:---|
|man\>|manで終わる単語を検索<br>〇 man, woman, human<br>× manual|
|\<\[0-9]{3}\>|3桁の数字のみ検索（0\~9の数字が3子で始まり、0\~9の数字が3個で終わる）|

### \[!]
\~以外の1文字を検索
|検索例|検索結果|
|:--:|:---|
|\[!0-9 ０-９]|数字以外の文字|
|test\[!0-5]user|test0\~5user以外を検索|

### {n}
直前の文字（または式）がn個ある単語を検索
使用方法は正規表現と同じため省略(fe{2}d → feedなど)
